{% extends "soil/base.html" %}
{% block title %}
    File Downloader
{% endblock title %}
{% block extrahead %}
    <script type="text/javascript">
        var autoRefresh = '';
        var pollDownloader =
                                function() {
                                    if ($('#ready_{{ download_id }}').length == 0)
                                    {
                                        $.get("{% url ajax_job_poll download_id %}", function(data) {
                                            $("#downloader_container").html(data);
                                        });
                                    } else {
                                        clearInterval(autoRefresh);
                                    }
                                };
        $(document).ready(
                function() {
                    autoRefresh = setInterval(pollDownloader, 2000);

                }
        );
    </script>
{% endblock extrahead %}
{% block content %}
    <h2>Preparing download. This may take some time...</h2>
    <div id="downloader_container">
    </div>
{% endblock content %}
