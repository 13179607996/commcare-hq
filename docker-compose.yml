postgres:
  image: postgres:9.4
  environment:
    POSTGRES_USER: commcarehq
    POSTGRES_PASSWORD: commcarehq
  volumes:
    - ./docker/data/postgresql:/var/lib/postgresql
  ports:
    - "5432:5432"
couch:
  image: klaemo/couchdb:latest
  volumes:
    - ./docker/data/couchdb:/usr/local/var/lib/couchdb
  ports:
    - "5984:5984"
redis:
  image: redis
  ports:
    - "6379:6379"
elasticsearch:
  image: elasticsearch:1.7.4
  ports:
    - "9200:9200"
  volumes:
    - ./docker/data/elasticsearch:/usr/share/elasticsearch/data
web:
  build: .
  dockerfile: Dockerfile_dev
  working_dir: /mnt
  command: /bin/bash -c /mnt/docker/wait.sh
  volumes:
    - .:/mnt
  ports:
    - "8000:8000"
  environment:
    PYTHONUSERBASE: /mnt/vendor
    START_CMD: "python manage.py runserver 0.0.0.0:8000"
  links:
    - postgres
    - couch
    - redis
    - elasticsearch
