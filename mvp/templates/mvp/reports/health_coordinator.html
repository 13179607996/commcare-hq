{% extends "reports/async/default.html" %}
{% load hq_shared_tags %}
{% load report_tags %}
{% load i18n %}

{% block js-inline %} {{ block.super }}
    <script type="text/javascript">
        $(function(){
            var recalc_thead_width = function () {
                var th_width = $('.mvp-table tbody td').width();
                var indicator_width = $('.mvp-table tbody th').width();
                $('.mvp-table thead th, .mvp-table tbody td').width(th_width);
                $('.mvp-table thead th:first-child, .mvp-table tbody th').width(indicator_width);
            };
            recalc_thead_width();

            $('#mvp-table-head').affix({
                offset: 197
            });
            $(window).resize(function () {
                recalc_thead_width();
            });
        });
    </script>
{% endblock %}

{% block reportcontent %}
    <table class="table table-bordered table-striped datatable mvp-table">
        <thead id="mvp-table-head" data-spy="affix" data-offset-top="197">
            <tr>
                <th class="indicator-def">&nbsp;</th>
                {% for month in months %}
                <th{% ifequal forloop.counter 13 %} class="current_month"{% endifequal %}>{{ month }}</th>
                {% endfor %}
                <th class="summary">Average</th>
                <th class="summary">Median</th>
                <th class="summary">Std. Dev.</th>
            </tr>
        </thead>
        <tbody>
            {% for indicator in report %}
            <tr>
                <th rowspan="3">{{ indicator.title }}</th>
                {% for p in indicator.table.percentages %}
                    <td{% if p.css %} class="{{ p.css }}"{% endif %}>{{ p.text }}</td>
                {% endfor %}
            </tr>
            <tr>
                {% for n in indicator.table.numerators %}
                    <td{% if n.css %} class="{{ n.css }}"{% endif %}>{{ n.text }}</td>
                {% endfor %}
            </tr>
            <tr>
                {% for d in indicator.table.denominators %}
                    <td{% if d.css %} class="{{ d.css }}"{% endif %}>{{ d.text }}</td>
                {% endfor %}
            </tr>
            <tr>
                <td colspan="17"></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

{% endblock %}