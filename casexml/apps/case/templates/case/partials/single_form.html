{% load i18n %}
{% load case_tags %}
{% load xform_tags %}

{% include "imports/fancy-code.html" %}

<ul class="nav nav-tabs">
    <li class="active">
        <a href="#form-data" data-toggle="tab">
            {% trans "Form Data" %}
        </a>
    </li>
    <li>
        <a href="#form-case-data" data-toggle="tab">
            {% trans "Case Changes" %}
        </a>
    </li>
    <li>
        <a href="#form-meta-data" data-toggle="tab">
            {% trans "Form Metadata" %}
        </a>
    </li>
    <li>
        <a href="#form-xml" data-toggle="tab">
            {% trans "Raw XML" %}
        </a>
    </li>
</ul>

<div class="tab-content">
    <div class="tab-pane active" id="form-data">
        {% render_tables form_data %}
        <a href="{% url render_form_data instance.domain instance.get_id %}">
            View Submission
        </a>
    </div>

    <div class="tab-pane" id="form-case-data">
        {% if this_case_data and other_cases_data %}
        <div style="float: left">
        <h4>{% trans "This Case" %}</h4>
        {% endif %}

        {% if this_case_data %}
        {% render_tables this_case_data %}
        {% endif %}
        </div>

        <div style="float: left">
        {% if this_case_data and other_cases_data %}
        <h4>{% trans "Other Cases" %}</h4>
        {% endif %}

        {% if other_cases_data %}
        {% for data in other_cases_data %}
        {% render_tables data %}
        </div>

        <div class="clearfix"></div>


        {% endfor %}
        {% endif %}
    </div>
    
    <div class="tab-pane" id="form-meta-data">
        {% render_tables form_meta_data %}
    </div>

    <div class="tab-pane" id="form-xml">
        <p>
            <a class="btn" href="{% url download_form domain instance.get_id %}" target="_blank">
                {% trans "Open XML in New Window" %}
            </a>
        </p>
        <p>Double-click code below to select all:</p>
        {% render_form_xml instance %}
    </div>
</div>
