{% load i18n %}
{% load case_tags %}
{% load xform_tags %}

{% include "imports/fancy-code.html" %}

<ul class="nav nav-tabs">
    <li class="active">
        <a href="#form-data" data-toggle="tab">
            {% trans "Form Properties" %}
        </a>
    </li>
    <li>
        <a href="#form-case-data" data-toggle="tab">
            {% trans "Cases" %}
        </a>
    </li>
    <li>
        <a href="#form-meta-data" data-toggle="tab">
            {% trans "Metadata" %}
        </a>
    </li>
    <li>
        <a href="#form-xml" data-toggle="tab">
            {% trans "Raw XML" %}
        </a>
    </li>
</ul>

<div class="tab-content">
    <div class="tab-pane active" id="form-data">
        <a href="{% url render_form_data instance.domain instance.get_id %}">
            View Submission
        </a>
        {% render_tables form_data %}
    </div>

    <div class="tab-pane" id="form-case-data">
        {% if case_data %}
        {% render_tables case_data case_data_options %}
        {% else %}
        <p class="muted">This form didn't change any cases.</p>
        {% endif %}
    </div>
    
    <div class="tab-pane" id="form-meta-data">
        {% render_tables form_meta_data %}
    </div>

    <div class="tab-pane" id="form-xml">
        <p>
            <a class="btn" href="{% url download_form domain instance.get_id %}" target="_blank">
                {% trans "Open XML in New Window" %}
            </a>
        </p>
        <p>Double-click code below to select all:</p>
        {% render_form_xml instance %}
    </div>
</div>
