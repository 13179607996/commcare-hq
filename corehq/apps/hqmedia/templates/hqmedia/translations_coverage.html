{% extends "hqmedia/uploader_base.html" %}
{% load hq_shared_tags %}
{% load i18n %}

{% block js %}{{ block.super }}
    <script src="{% static 'hqmedia/js/translations_coverage.js' %}"></script>
{% endblock js %}

{% block page_content %}
    {% registerurl 'check_translations_coverage' domain app.get_id %}

    <p class="lead">{{ current_page.page_name }}</p>

    {% url "hqmedia_references" domain app.get_id as checker_url %}
    {% url "manage_multimedia_paths" domain app.get_id as paths_url %}
    {% blocktrans %}
        <p class="help-block">
            This page allows you to check if your non-default languages are missing any multimedia <strong>references</strong>
            and therefore will display the default language's multimedia.
            <br>
            If any references are missing, visit <a href="{{ paths_url }}">Manage Multimedia Paths</a> to identify
            where those references are used and add translated multimedia.
            <br>
            This page does not check if your app is missing any <strong>files</strong>; visit the
            <a href="{{ reference_checker }}">Multimedia Reference Checker</a> to identify missing files.
        </p>
    {% endblocktrans %}

    <form action="#" class="form-horizontal" method="post">
        <div class="form-group">
            <label for="id_first_name" class="{% css_label_class %} control-label">
                {% trans "Language(s)" %}
            </label>
            <div class="{% css_field_class %} controls">
                <select multiple name="langs" class="form-control">
                    {% for lang in app.langs %}
                        {% if lang != app.default_language %}
                            <option>{{ lang }}</option>
                        {% endif %}
                    {% endfor %}
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="id_favorite_color" class="{% css_label_class %} control-label">
                {% trans "Media Type(s)" %}
            </label>
            <div class="{% css_field_class %} controls">
                <select multiple name="media_types" class="form-control">
                    {% for type, name in media_types.items %}
                        <option value="{{ type }}">{{ name }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        <div class="form-group">
            <div class="{% css_action_class %} controls">
                <button class="btn btn btn-primary" type="submit">
                    <i class="fa fa-check"></i>
                    Check
                </button>
            </div>
        </div>
    </form>
    <div id="results"></div>
{% endblock %}
