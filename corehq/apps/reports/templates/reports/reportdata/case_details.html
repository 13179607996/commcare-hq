{% extends "reports/report_base.html" %}
{% load case_tags %}
{% load hq_shared_tags %}

{% block js-inline %}{{ block.super }}
    <script>
    $(document).ready(function() {
        // this adds a clickable link to our form elements
        var form_lookup_dict = {{ form_lookups|JSON }};
        var url_base = "{% url render_form_data domain 'placeholder_formid' %}";
        var link_template = '<a href="placeholder_url">placeholder_text</a>'
        $(".xform_ref").each(function() {
            var formid = $(this).data("formid");
            if (formid) {
                var text = form_lookup_dict[formid];
                var url = url_base.replace("placeholder_formid", formid);
                var body = link_template.replace("placeholder_url", url).replace("placeholder_text", text);
                $(this).html(body);
            }
        });
    });
    </script>
{% endblock %}

{% block page-title %}
    <ul class="breadcrumb">
        <li>
            <a href="{% url default_report domain %}"><strong>Reports</strong></a> <span class="divider">&gt;</span>
        </li>
        <li>
            <a href="{% url report_dispatcher domain 'case_list' %}">Case List</a> <span class="divider">&gt;</span>
        </li>
        <li class="active">
            <a href="#">{{ report.name }}</a>
        </li>
    </ul>
{% endblock %}

{% block reportpresentation %}
<div class="hq-generic-report">
    {% render_case case_id timezone %}
</div>
{% endblock %}