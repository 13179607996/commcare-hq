{% extends base_template %}
{% block page_stylesheets %}
    <!--style>
        .ui-datepicker-calendar {
            display: none;
        }
    </style-->
{% endblock %}
{% block page_imports %}
    {% include "imports/datatables.html" %}
    {% include "imports/flot.html" %}
{% endblock %}
{% block head %}
    <script type="text/javascript">
        function shiftDates(days) {
            start = new Date($("#startdate").val());
            start.setDate(start.getDate() + days);
            end = new Date($("#enddate").val());
            end.setDate(end.getDate() + days);
            $("#startdate").datepicker('setDate', start);
            $("#enddate").datepicker('setDate', end);
            $("#dateForm").submit();
        }
		$(function() {
		    $('.date-picker').datepicker( {
		        changeMonth: true,
		        changeYear: true,
		        showButtonPanel: true,
		        dateFormat: 'yy-mm-dd',
                maxDate: '0',
                numberOfMonths: 3,
		        /*onClose: function(dateText, inst) {
		            var month = $("#ui-datepicker-div .ui-datepicker-month :selected").val();
		            var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
		            $(this).datepicker('setDate', new Date(year, month, 1));
		        }*/
		    });
            $('#startdate').change(function(){
                $("#enddate").datepicker('option', 'minDate', $('#startdate').val());
            }).trigger('change');
            $("#previous_date").click(function(e){
                e.preventDefault();
                shiftDates(-7);
            })
            $("#next_date").click(function(e){
                e.preventDefault();
                shiftDates(7);
            })
		});
    </script>
    <script type="text/javascript">
        // datatable configuration.
        $(document).ready(function() {
            $('.datatable').dataTable({
                "bJQueryUI": true
            });
        }); 
    </script>
{% block report_javascripts %}{% endblock %}
{% endblock %}
{% block content %}
<p><a href="{% url report_list domain %}">&lt;-- back to report list</a></p>
<h3>{{ report.name|default:"Unknown Report" }}</h3>
{% if show_dates %}
<form method="get" id="dateForm">
    <p>Start Date: <input type="text" id="startdate" name="startdate" class="date-picker" value="{{ start_date }}">
       End Date: <input type="text" id="enddate" name="enddate" class="date-picker" value="{{ end_date }}">
       <input type="submit" value="Go!" />
    </p>
    <p>
        <a href="#" id="previous_date">Previous week</a> | <a href="#" id="next_date">Next Week</a>
    </p>
</form>
{% endif %}
{% block reportcontent %}Your report goes here{% endblock %} 
{% endblock %}

<!--body>
    <label for="startDate">Date :</label>
    <input name="startDate" id="startDate" class="date-picker" />
</body-->
</html> 