{% extends base_template %}
{% load xform_tags %}
{% load case_tags %}
{% block head %}
    {{block.super}}
    <link rel="stylesheet" href="{{ STATIC_URL }}couchforms/stylesheets/xforms.css" />
    <script src="{{ STATIC_URL }}syntaxhighlighter/scripts/shCore.js"></script>
    <script src="{{ STATIC_URL }}syntaxhighlighter/scripts/shBrushXml.js"></script>
    <link type="text/css" rel="stylesheet" href="{{ STATIC_URL }}syntaxhighlighter/styles/shCoreDefault.css"/>
    <style>
    body .syntaxhighlighter .line {
            white-space: pre-wrap !important; /* make code wrap */
    }
    </style>
    <script>
    $(function() {
        $("#xformtabs").tabs();
        $("#formxml").addClass("brush: xml;");
        SyntaxHighlighter.all({toolbar: false, "wrap-lines": true});
    });
    </script>
{% endblock %}
{% block content %}
<div id="xformtabs">
    <ul>
        <li><a href="#form_display">Form data display</a></li>
        <li><a href="#raw_xml">Raw XML</a></li>
{% if instance.attachments %}
        <li><a href="#attachments">Attachments</a></li>
{% endif %}
{% if caseblocks %}
        <li><a href="#cases">Cases</a></li>
{% endif %}
    </ul>
<div title="Form Data" id="form_display">
    {% render_form_data instance %}
</div>
<div title="Download" id="raw_xml">
    <a href="{% url download_form domain instance.get_id %}" target="_blank">show in new window</a>
    <p>Double-click to select all.</p>
    {% render_form_xml instance %}
</div>
<div title="Attachments" id="attachments">
    <ul>
    {% for key, val in instance.attachments.items %}
        <li><a href="{% url download_attachment domain instance.get_id key %}">{{ key }}</a></li>
    {% endfor %}
    </ul>
</div>
<div title="Cases" id="cases">
    <ul>
    {% for case in caseblocks %}
        <li><a href="{% url case_details domain case.case_id %}">{% case_inline_display case.case_id %}</a></li>
    {% endfor %}
    </ul>
</div>
{% endblock %}
