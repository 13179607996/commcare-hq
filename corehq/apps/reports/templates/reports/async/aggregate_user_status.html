{% extends report_base|default:"reports/async/default.html" %}

{% load hq_shared_tags %}
{% load report_tags %}
{% load i18n %}

{% block reportcontent %}
<div id="sync-data" class="hide" data-value='{{ last_sync_data|JSON }}'></div>
<div id="sync-totals" class="hide" data-value='{{ last_sync_totals|JSON }}'></div>
<div id="submission-data" class="hide" data-value='{{ last_submission_data|JSON }}'></div>
<div id="submission-totals" class="hide" data-value='{{ last_submission_totals|JSON }}'></div>
<div class="container-fluid">
      <div class="row text-center">
          <div class="col-sm-4 text-center">
              <h4>{% trans "Total Mobile Workers" %}</h4>
              <h2>{{ total_users }}</h2>
          </div>
          <div class="col-sm-4 text-center">
              <h4>{% trans "Mobile Workers that have Ever Submitted Data" %}</h4>
              <h2>{{ ever_submitted }}</h2>
          </div>
          <div class="col-sm-4 text-center">
              <h4>{% trans "Mobile Workers that have Ever Synced" %}</h4>
              <h2>{{ ever_synced }}</h2>
          </div>
      </div>
      <div class="panel panel-default">
          <div class="panel-heading">
              <h3 class="panel-title"><strong>{% trans "Mobile Workers who have Submitted" %}</strong></h3>
          </div>
          <div class="panel-body">
              <div class="row">
              {% for bucket in submission_summary %}
                  <div class="col-sm-2 text-center">
                      <h4>{{ bucket.1 }}</h4>
                      <h2>{{ bucket.0 }}</h2>
                  </div>
              {% endfor %}
                  <div class="col-sm-4 text-center">
                      <div class="btn-group">
                          <button type="button" class="btn btn-primary chart-toggle"
                                  data-chart-data="submission-data" data-chart-div="submission_dates">{% trans "Daily Breakdown" %}</button>
                          <button type="button" class="btn chart-toggle"
                                  data-chart-data="submission-totals" data-chart-div="submission_dates">{% trans "Percent of Total Users" %}</button>
                      </div>
                  </div>
              </div>
              <div class="row">
                  <div id="submission_dates"><svg height="300px"></svg></div>
              </div>
          </div>
      </div>
      <div class="panel panel-default">
          <div class="panel-heading">
              <h3 class="panel-title"><strong>{% trans "Mobile Workers who have Synced" %}</strong></h3>
          </div>
          <div class="panel-body">
              <div class="row">
              {% for bucket in sync_summary %}
                  <div class="col-sm-2 text-center">
                      <h4>{{ bucket.1 }}</h4>
                      <h2>{{ bucket.0 }}</h2>
                  </div>
              {% endfor %}
                  <div class="col-sm-4 text-center">
                      <div class="btn-group">
                          <button type="button" class="btn btn-primary chart-toggle"
                                  data-chart-data="sync-data" data-chart-div="sync_dates">{% trans "Daily Breakdown" %}</button>
                          <button type="button" class="btn chart-toggle"
                                  data-chart-data="sync-totals" data-chart-div="sync_dates">{% trans "Percent of Total Users" %}</button>
                      </div>
                  </div>
              </div>
              <div class="row">
                  <div id="sync_dates"><svg height="300px"></svg></div>
              </div>
          </div>
      </div>
</div>
{% endblock reportcontent %}
