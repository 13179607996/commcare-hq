{% extends base_template %}
{% load i18n %}
{% load hq_shared_tags %}

{% block head %}{{ block.super }}
    <link href="{% static 'formdesigner/css/chosen.css' %}" rel="stylesheet" />
    <style>
        #main_container {
            padding: 10px;
        }
        .key-value-table {
            /*width: 500px;*/
            margin: auto;
        }
        .key-value-table th, .key-value-table td {
            border-bottom: 1px solid #ccc;
            vertical-align: middle;
        }
        .key-value-table th {
            color: black;
            text-align: left;
            height: 24px;
            padding-left: 8px;
            font-weight: bold;
        }
        .key-value-table td .ui-element-input,
        .key-value-table td .ui-element-select {
            border: 1px solid transparent;
            padding: 2px 1px 2px 3px;
            margin: 1px;
            width: 200px;
            height: 16px;
            display: block;
        }
        .key-value-table td > span {
            display: block;
            width: 100%;
        }
        h1 {
            font-size: 2em;
            text-align: center;
        }
        h1 input[type="text"] {
            width: 400px;
            text-align: center;
            margin-bottom: .5em;
        }
        h2 {
            font-size: 1.2em;
            margin: .5em 0;
        }
        h2, #case-edit-form-edit-link {
            display: inline-block;
            margin-right: 1em;
        }
        #main_container {
            min-width: 500px;
        }
    </style>
{% endblock %}

{% block js %}{{ block.super }}
    <script src="{% static 'formdesigner/js/chosen.jquery.min.js' %}"></script>
    <script src="{% static 'hqwebapp/javascripts/underscore-1.3.1.js' %}"></script>
    <script src="{% static 'hqwebapp/javascripts/jquery.textchange.min.js' %}"></script>
    <script src="{% static 'hqwebapp/js/ui-element.js' %}"></script>
    <script src="{% static 'cloudcare/js/cheapxml.js' %}"></script>
    <script src="{% static 'cloudcare/js/casexml.js' %}"></script>
    <script src="{% static 'cloudcare/js/case-edit-form.js' %}"></script>
    <script src="{% static 'cloudcare/js/case-list.js' %}"></script>
{% endblock %}
{% block js-inline %}{{ block.super }}
    <script>
        $(function () {
            var caseEditForm = $('#case-edit-form'),
                caseList = $('#case-list'),
                user_id = {{ request.couch_user.user_id|JSON }};

            CaseEditForm.init({
                home: caseEditForm,
                commcareCase: {{ case|JSON }},
                user_id: user_id,
                caseSpec: {{ case_spec|JSON }},
                receiverUrl: "{% url receiver_post domain %}",
                groupsUrl: "{% url cloudcare_get_groups domain request.couch_user.user_id %}",
                lang: "en"
            });

            CaseList.init({
                user_id: user_id,
                casesUrl: "{% url cloudcare_get_cases domain %}",
                home: caseList
            });
        }());
    </script>
{% endblock %}

{% block content %}
    <div id="main_container">
        <section id="case-list"></section>
        <section id="case-edit-form"></section>
    </div>
{% endblock %}