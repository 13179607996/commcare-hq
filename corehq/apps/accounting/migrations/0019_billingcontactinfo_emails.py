# -*- coding: utf-8 -*-
# Generated by Django 1.11.8 on 2018-01-18 03:56
from __future__ import unicode_literals

import django.contrib.postgres.fields
from django.db import migrations, models

from corehq.sql_db.operations import HqRunPython


def _migrate_emails(apps, schema_editor):
    BillingContactInfo = apps.get_model('accounting', 'BillingContactInfo')
    for contact_info in BillingContactInfo.objects.all():
        contact_info.emails = contact_info.email_list
        contact_info.save()


class Migration(migrations.Migration):

    dependencies = [
        ('accounting', '0018_auto_20180118_0339'),
    ]

    operations = [
        migrations.AddField(
            model_name='billingcontactinfo',
            name='emails',
            field=django.contrib.postgres.fields.ArrayField(base_field=models.EmailField(help_text='We will email communications regarding your account to the emails specified here.', max_length=254, verbose_name='Contact Emails'), blank=True, null=True, size=None),
        ),
        HqRunPython(_migrate_emails),
    ]
