{% extends "hqwebapp/base_section.html" %}
{% load compress %}
{% load hq_shared_tags %}

{% block title %}App Build Times{% endblock %}

{% block stylesheets %}{{ block.super }}
    <link type="text/css" rel="stylesheet" href="{% static 'jquery-treetable/css/jquery.treetable.css' %}"/>
{% endblock stylesheets %}

{% requirejs_main 'hqadmin/js/app_build_timings' %}

{% block content %}
<div class="container-fluid">
    <h1>App Build Timings</h1>
    <h4>
        <a href="{% url 'view_app' app.domain app.master_id %}">
            {{ app.name }}
        </a>
        <small>{{ app.master_id }}</small>
    </h4>

    <div class="row">
        <table id="timingTable" class="table">
            <thead>
                <tr>
                    <th>Timer name</th>
                    <th>Duration</th>
                    <th>Percent of Parent</th>
                    <th>Percent of Total</th>
                </tr>
            </thead>
            <tbody>
                {% for timer in timing_data %}
                    <tr data-tt-id="{{ timer.name }}" {% if timer.parent %}data-tt-parent-id="{{ timer.parent.name }}"{% endif %}>
                        <td>{{ timer.name }}</td>
                        <td>{{ timer.duration|stringformat:".3f" }}</td>
                        <td>{{ timer.percent_of_parent|stringformat:".1f" }}</td>
                        <td>{{ timer.percent_of_total|stringformat:".1f" }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

</div>
{% endblock content %}
