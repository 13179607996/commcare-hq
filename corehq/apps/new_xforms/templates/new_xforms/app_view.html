{% extends "new_xforms/forms.html" %}
{% load xforms_extras %}
{% block form-view %}
    <h3>{{ app|nice }}</h3>
    <h4>Supported Languages</h4>
    <table class="config">
        {% if edit %}
            {% for lang in app.langs %}
                <tr class="form editable">
                    <td>
                        [<a class="delete_link" href="#">x</a>]
                        <div class="delete_dialog" title="Remove Language">
                            <form action="{% url corehq.apps.new_xforms.views.delete_app_lang domain app.id%}" method="POST">
                                <p>Removing this language will not permanently delete any translations you have made for it.</p>
                                <input type="hidden" name="lang_id" value="{{ forloop.counter|add:-1 }}" />
                                <input type="submit" value="Remove" />
                            </form>
                        </div>
                    </td>
                    <td>
                        <input class="code" type="text" name="lang" value={{ lang }} />
                        <div class="immutable"><code>{{ lang }}</code></div>
                    </td>
                    <td>
                        <input type="hidden" name="lang_id" value="{{ forloop.counter|add:-1 }}" />
                        <a href="{% url corehq.apps.new_xforms.views.edit_app_lang domain app.id %}" class="submit button">
                            Save
                        </a>
                        <div class="immutable">
                            [<a href="#">edit</a>]
                        </div>
                    </td>
                </tr>
            {% endfor %}
            <tr class="form editable">
                <td>
                </td>
                <td>
                    <input class="code" type="text" name="lang" />
                    <div class="immutable"></div>
                </td>
                <td>
                    <a href="{% url corehq.apps.new_xforms.views.edit_app_lang domain app.id %}" class="submit button">
                        Add
                    </a>
                    <div class="immutable">
                        [<a href="#">add</a>]
                    </div>
                </td>
            </tr>
        {% else %}
            {% for lang in app.langs %}
                <tr>
                    <td>
                         <code>{{ lang }}</code>
                    </td>
                </tr>
            {% empty %}
                <tr>
                    <td>
                        <p class="warning">No supported languages</p>
                    </td>
                </tr>
            {% endfor %}
        {% endif %}
    </table>
{% endblock %}