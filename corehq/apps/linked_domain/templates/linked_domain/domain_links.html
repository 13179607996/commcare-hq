{% extends "hqwebapp/base_section.html" %}
{% load hq_shared_tags %}
{% load i18n %}

{% requirejs_main "linked_domain/js/domain_links" %}

{% block page_content %}
{% initial_page_data 'view_data' view_data %}
{% registerurl 'linked_domain:domain_link_rmi' domain %}

<div id="domain_links">
    <h2>{% trans "Project Links" %}</h2>
    <!-- ko if: master_link -->
    <p>This project is linked to <b data-bind="text: master_link.master_domain"></b></p>
    <div>
         <table class="table table-striped table-hover">
            <thead>
            <tr>
                <th>{% trans "Linked Model" %}</th>
                <th>{% trans "Last Updated" %} ({{ timezone }})</th>
                <th></th>
            </tr>
            </thead>
            <tbody data-bind="foreach: model_status">
                <tr>
                    <td data-bind="text: name"></td>
                    <td data-bind="text: last_update"></td>
                    <td>
                        <button class="btn" data-bind="visible: can_update, click: update">
                            {% trans "Update" %}
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <!-- /ko -->
    <!-- ko if: linked_domains-->
    <h2>{% trans "Projects Linked to this one" %}</h2>
    <table class="table table-striped table-hover">
        <thead>
        <tr>
            <th>{% trans "Project Name" %}</th>
            <th>{% trans "Last Updated" %} ({{ timezone }})</th>
        </tr>
        </thead>
        <tbody data-bind="foreach: linked_domains">
            <tr>
                <td data-bind="text: linked_domain"></td>
                <td data-bind="text: last_update"></td>
            </tr>
        </tbody>
    </table>
    <!-- /ko -->
</div>
{% endblock %}
