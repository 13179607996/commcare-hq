--- 
+++ 
@@ -1,4 +1,4 @@
-{% extends "app_manager/v1/managed_app.html" %}
+{% extends "app_manager/v2/managed_app.html" %}
 {% load xforms_extras %}
 {% load hq_shared_tags %}
 {% load i18n %}
@@ -8,7 +8,12 @@
     {% include 'analytics/fullstory.html' %}
 {% endblock %}
 {% block js %}{{ block.super }}
-    <script src="{% static 'app_manager/js/commcaresettings.js' %}"></script>
+
+    {#  todo separate tempaltes #}
+    {% if not release_manager %}
+        <script src="{% static 'app_manager/js/commcaresettings.js' %}"></script>
+    {% endif %}
+
     <script src="{% static 'hqwebapp/ko/bulk_upload_file.js' %}"></script>
     <script src="{% static 'app_manager/js/supported-languages.js' %}"></script>
     <script src="{% static 'app_manager/js/password_setter.jquery.js' %}"></script>
@@ -31,9 +36,6 @@
             settings: {
                 sections: {{ settings_layout|JSON }},
                 values: {{ settings_values|JSON }},
-                {% if request|toggle_enabled:"CUSTOM_PROPERTIES" %}
-                customProperties: {{ custom_properties|JSON }},
-                {% endif %}
                 urls: {
                     save: '{% url "edit_commcare_settings" domain app.id %}'
                 },
@@ -47,123 +49,94 @@
             }
         };
 
+        {# todo separate templates #}
+        {% if not release_manager %}
         $(function () {
             var CommcareSettings = hqImport('app_manager/js/commcaresettings.js').CommcareSettings;
             COMMCAREHQ.appView.settings = new CommcareSettings(COMMCAREHQ.appView.settings);
             $('#commcare-settings').koApplyBindings(COMMCAREHQ.appView.settings);
         });
+        {% endif %}
 
         {% if not app.is_remote_app %}
-        $(function () {
-            var multimedia_tab = (function () {
-                var self = {};
-                self.load_state = ko.observable(null);
-                self.multimedia_page_html = ko.observable('');
-                self.load_if_necessary = function () {
-                    if (!self.load_state() || self.load_state() === 'error') {
-                        self.load_state('loading');
-                        $.ajax({
-                            url: '{% url 'app_multimedia_ajax' domain app.get_id %}',
-                            success: function(content) {
-                                self.load_state('loaded');
-                                self.multimedia_page_html(content);
-                            },
-                            error: function() {
-                                alert('Oops, there was a problem loading this section. Please try again.');
-                                self.load_state('error');
-                            },
-                        });
+          {# todo separate templates #}
+          {% if not release_manager %}
+          $(function () {
+              var multimedia_tab = (function () {
+                  var self = {};
+                  self.load_state = ko.observable(null);
+                  self.multimedia_page_html = ko.observable('');
+                  self.load_if_necessary = function () {
+                      if (!self.load_state() || self.load_state() === 'error') {
+                          self.load_state('loading');
+                          $.ajax({
+                              url: '{% url 'app_multimedia_ajax' domain app.get_id %}',
+                              success: function(content) {
+                                  self.load_state('loaded');
+                                  self.multimedia_page_html(content);
+                              },
+                              error: function() {
+                                  alert('Oops, there was a problem loading this section. Please try again.');
+                                  self.load_state('error');
+                              },
+                          });
+                      }
+                  };
+                  return self;
+              }());
+              $("#multimedia").koApplyBindings(multimedia_tab);
+              $('#demand-multimedia').on('shown.bs.tab', function () {
+                  if (multimedia_tab.load_state() === null) {
+                      multimedia_tab.load_if_necessary();
+                  }
+              });
+          });
+          {% endif %}
+        {% endif %}
+
+      </script>
+      {# todo separate templates #}
+      {% if not release_manager %}
+        {% include 'hqmedia/partials/multimedia_init.html' %}
+        <script>
+            var refs = {{ refs|JSON }};
+            var media_info = {{ media_info|JSON }};
+            var image_refs = {};
+            for (var slug in refs) {
+                image_refs[slug] = new ImageReference(refs[slug]);
+                image_refs[slug].upload_controller = HQMediaUploaders[slug];
+                image_refs[slug].setObjReference(media_info[slug]);
+            }
+            function urlFromLogo(slug) {
+                return image_refs[slug].url;
+            }
+            function thumbUrlFromLogo(slug) {
+                return image_refs[slug].thumb_url;
+            }
+            function triggerUploadForLogo(slug) {
+                if(image_refs[slug]) {
+                    image_refs[slug].triggerUpload();
+                }
+            }
+            function uploadCompleteForLogo(slug, response) {
+                if(image_refs[slug]) {
+                    image_refs[slug].uploadComplete(null, null, response);
+                }
+            }
+            function getPathFromSlug(slug) {
+                return image_refs[slug].path;
+            }
+            function removeLogo(slug) {
+                $.post(
+                    '{% url "hqmedia_remove_logo" domain app.id %}',
+                    {
+                        logo_slug: slug
+                    },
+                    function(data, status) {
+                        if(status == 'success'){
+                            image_refs[slug].url("");
+                        }
                     }
-                };
-                return self;
-            }());
-            $("#multimedia").koApplyBindings(multimedia_tab);
-            $('#demand-multimedia').on('shown.bs.tab', function () {
-                if (multimedia_tab.load_state() === null) {
-                    multimedia_tab.load_if_necessary();
-                }
-            });
-        });
-        {% endif %}
-
-        $(function () {
-            var state = "",
-                $main = $("#releases"),
-                $loading = $main.find(".hq-loading").remove(),
-                $loadingError = $main.find(".hq-loading-error").remove();
-
-            $('#demand-releases').on('shown.bs.tab', function () {
-                if (state === "loading" || state === "loaded") {
-                    return;
-                }
-                state = "loading";
-
-                // If the content takes a noticeable amount of time to load, show a spinner
-                var showSpinner = true;
-                _.delay(function() {
-                    if (showSpinner) {
-                        $main.html($loading.html());
-                    }
-                }, 100);
-
-                // Load the content
-                $.ajax({
-                    url: "{% url 'release_manager_ajax' domain app.get_id %}?limit={{fetchLimit}}",
-                    success: function(content) {
-                        state = "loaded";
-                        showSpinner = false;
-                        $main.html(content);
-                    },
-                    error: function() {
-                        state = "error";
-                        showSpinner = false;
-                        $main.html($loadingError.html());
-                    },
-                });
-            });
-        });
-
-    </script>
-    {% include 'hqmedia/partials/multimedia_init.html' %}
-    <script>
-        var refs = {{ refs|JSON }};
-        var media_info = {{ media_info|JSON }};
-        var image_refs = {};
-        for (var slug in refs) {
-            image_refs[slug] = new ImageReference(refs[slug]);
-            image_refs[slug].upload_controller = HQMediaUploaders[slug];
-            image_refs[slug].setObjReference(media_info[slug]);
-        }
-        function urlFromLogo(slug) {
-            return image_refs[slug].url;
-        }
-        function thumbUrlFromLogo(slug) {
-            return image_refs[slug].thumb_url;
-        }
-        function triggerUploadForLogo(slug) {
-            if(image_refs[slug]) {
-                image_refs[slug].triggerUpload();
-            }
-        }
-        function uploadCompleteForLogo(slug, response) {
-            if(image_refs[slug]) {
-                image_refs[slug].uploadComplete(null, null, response);
-            }
-        }
-        function getPathFromSlug(slug) {
-            return image_refs[slug].path;
-        }
-        function removeLogo(slug) {
-            $.post(
-                '{% url "hqmedia_remove_logo" domain app.id %}',
-                {
-                    logo_slug: slug
-                },
-                function(data, status) {
-                    if(status == 'success'){
-                        image_refs[slug].url("");
-                    }
-                }
             );
         }
     </script>
@@ -250,6 +223,9 @@
             ga_track_event('App Builder', 'Download Multimedia');
         });
     </script>
+
+    {# todo separate templates #}
+    {% if not release_manager %}
     <script>
         // Set up typeahead for domain names
         $(function(){
@@ -258,6 +234,7 @@
             });
         });
     </script>
+    {% endif %}
 {% endblock %}
 
 {% block title %}
@@ -269,6 +246,52 @@
 {% endblock %}
 
 {% block form-view %}
+  <div class="pull-right">
+    <a class="btn btn-default js-preview-toggle" style="display: none;" href="#">
+      <span class="js-preview-action-show hide"><i class="fa fa-play-circle"></i> {% trans "Preview Changes" %}</span>
+      <span class="js-preview-action-hide hide"><i class="fa fa-pause-circle"></i> {% trans "Hide Preview" %}</span>
+    </a>
+    <a href="{% url "app_summary" domain app.id %}" class="btn btn-default">
+      <i class="fa fa-list-alt"></i>
+      {% trans "App Summary" %}
+    </a>
+  </div>
+
+
+  <inline-edit params="
+      value: '{{ app.name|escapejs }}',
+      readOnlyClass: 'h3',
+      url: '{% url "edit_app_attr" domain app.id 'name' %}',
+      placeholder: '{% trans "Untitled App"|escapejs %}',
+      postSave: function(data) { return hqImport('app_manager/js/app_manager.js').updateDOM(data.update); },
+      rows: 1,
+      saveValueName: 'name',
+  "></inline-edit>
+  <br />
+  <inline-edit params="
+      value: '{{ app.short_comment|escapejs }}',
+      url: '{% url "edit_app_attr" domain app.id 'comment' %}',
+      placeholder: '{% trans "Enter app description here"|escapejs %}',
+      saveValueName: 'comment',
+      readOnlyClass: 'app-comment',
+      cols: 50,
+  "></inline-edit>
+
+  <br><br>
+
+
+  {% if release_manager %}
+      <div class="tab-pane" id="releases">
+          {% include "app_manager/v2/partials/releases.html" %}
+      </div>
+  {% else %}
+      <div class="tab-content">
+          <div class="tab-pane{% if not copy_app_form.is_bound %} active{% endif %}" id="app-settings">
+              {% include "app_manager/v2/partials/app-settings.html" %}
+          </div>
+      </div>
+  {% endif %}
+{% else %}
     <div class="tab-content">
         <div class="tab-pane" id="releases">
             <!-- templates only; will be populated asynchronously -->
@@ -286,9 +309,9 @@
             </script>
         </div>
         <div class="tab-pane{% if not copy_app_form.is_bound %} active{% endif %}" id="app-settings">
-            {% include "app_manager/v1/partials/app-settings.html" %}
+            {% include "app_manager/v2/partials/app-settings.html" %}
         </div>
-        {% include 'app_manager/v1/languages.html' %}
+        {% include 'app_manager/v2/languages.html' %}
 
         {% if app.get_doc_type == "Application" %}
             <div class="tab-pane multimedia" id="multimedia">
@@ -331,12 +354,13 @@
             </form>
         </div>
     </div>
+{% endif %}
 {% endblock %}
 
 {% block modals %}{{ block.super }}
 {% for uploader in uploaders %}
 {% include 'hqmedia/partials/multimedia_uploader.html' %}
 {% endfor %}
-{% include 'app_manager/v1/partials/password_setter_modal.html' %}
-{% include 'app_manager/v1/partials/toggle_diff_modal.html' %}
-{% endblock %}
+{% include 'app_manager/v2/partials/password_setter_modal.html' %}
+{% include 'app_manager/v2/partials/toggle_diff_modal.html' %}
+{% endblock %}
