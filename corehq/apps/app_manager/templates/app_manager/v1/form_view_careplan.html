{% extends "app_manager/v1/form_view_base.html" %}
{% load xforms_extras %}
{% load hq_shared_tags %}
{% load i18n %}

{% block js_extra %}
    <script src="{% static 'app_manager/js/careplan-config-ui.js' %}"></script>
{% endblock %}

{% block js-inline %}{{ block.super }}
<script>
    var initial_page_data = hqImport("hqwebapp/js/initial_page_data.js").get;
    var form_requires = ko.observable({{ form.requires|JSON }});
    var Careplan = hqImport('app_manager/js/careplan-config-ui.js').Careplan;
    var careplan = new Careplan(_.extend({}, initial_page_data("case_config_options"), {
        home: $('#case-config-ko'),
        save_url: "{% url "edit_careplan_form_actions" app.domain app.id module.id nav_form.id %}",

        case_preload: {{ case_preload|JSON }},
        customCaseUpdates: {{ custom_case_properties|JSON }},
        fixedQuestions: {{ fixed_questions|JSON }},
        mode: "{{ mode }}",
    }));
    careplan.init();
</script>
{% endblock %}

{% block case_management_content %}
    {% include 'app_manager/v1/partials/case_config_careplan.html' %}
{% endblock %}
