

<project name="cchq_main_build" default="compile">

	<taskdef resource="pyAntTasks.properties"/>
	<property name="src.dir" value="."/>
	<property name="apps.dir" value="../../apps"/>	
	<property name="pydoc.dir" value="../../pydocs"/>
	<property name="lib.dir" value="../../libs" />
	<property name="scripts.dir" value="../../scripts" />
	
	<target name="init">
		<mkdir dir="${pydoc.dir}"/>
	</target>
	
	<!--
		    Clean out any compiled code or files generated by the build.
	-->
	<target name="clean" depends="init">
		<delete>
			<fileset dir="${src.dir}">
		    	<include name="**/*.pyc"/>
		        <include name="**/*.pyo"/>
		    </fileset>
			<fileset dir="${apps.dir}">
				<include name="**/*.pyc"/>
				<include name="**/*.pyo"/>
			</fileset>
			<fileset dir="${libs.dir}">
				<include name="**/*.pyc"/>
				<include name="**/*.pyo"/>
			</fileset>
			<fileset dir="${scripts.dir}">
				<include name="**/*.pyc"/>
				<include name="**/*.pyo"/>
			</fileset>
		    <fileset dir="${pydoc.dir}">
		    	<include name="**/*"/>
			</fileset>
		</delete>
	</target>

	
	<target name="compile">
		<py-compile dir="${src.dir}" pythonpath="${src.dir}" optimize="0"/>
	</target>	

	<target name="run.feedparser" depends="compile">
		<py-run script="src/feedparser/feedparser.py" pythonpath="${src.dir}" optimize="0">
			<arg value="http://www-106.ibm.com/developerworks/news/dw_dwtp.rss" />
			</py-run>
		</target>

		<property name="pydoc.dir" value="pydoc"/>

	

		<target name="pydoc" depends="init,compile">
			<py-doc pythonpath="${src.dir}" destdir="${pydoc.dir}">
				<fileset dir="${src.dir}">
					<include name="**/*"/>
				</fileset>
			</py-doc>
		</target>



	</project>





	