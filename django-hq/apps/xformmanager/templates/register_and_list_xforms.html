{% extends "xformmanager_base.html" %}
{% load i18n %}
{% block title %}Upload your xforms here{% endblock %}
{% block mgr_content %}

<div class="fieldWrapper{% if form.message.errors %} errors{% endif %}">
    {% if form.message.errors %}
        <ol>
        {% for error in form.message.errors %}
            <li><strong>{{ error|escape }}</strong></li>
        {% endfor %}
        </ol>
    {% endif %}
    {{ form.message }}
</div>

<div class="fieldWrapper{% if errors %} errors{% endif %}">
    {% if errors %}
            <li><strong>{%trans "Submit Error: "%}{{ errors|escape }}</strong></li>
    {% endif %}
</div>

<div id="xform-register-block">
<h1>Register a New XForm</h1>
<form action="" method="POST" enctype="multipart/form-data">
<table>
{{ upload_form.as_ul}}
</table>
<input type="submit" value="Submit" />
</form>
{% if register_success %}
	<p>{% trans "Registration successful for xform id:"%}{{newsubmit.id}}</p>
{% endif %}
</div>

<h2>{% trans "Registered XForms" %}</h2>

<strong>
<ol>
      
   <table class="sofT">
   		<tr>
   			<td class="helpHed">{% trans "Display Name" %}</td>
   			<td class="helpHed">{% trans "Schema Definition" %}</td>
   			<td class="helpHed">{% trans "Added Date" %}</td>
   			
   			   			
   			<td class="helpHed"></td>   			
   		</tr>
   		{% for form in registered_forms %}   
   		<tr>
   			<td><a href="{% url xformmanager.views.data form.id %}">
   			
   			{{form.form_display_name}}
   			</a></td>
   			<td>
   			{{form.form_name}}
   			</td>
   			   			
   			<td>
	   			{% blocktrans with form.submit_time|date as date_t and form.submit_time|time as time_t %}
	   				{{date_t}}, {{time_t}}
	   			{% endblocktrans %}
   			</td>
   			
   			   			<td>
	   			<a href="{% url xformmanager.views.remove_xform form.id %}">
	   			{% trans "Drop This Form" %}
	   			</a>
   			</td>
   		</tr>
   		{% endfor %}   		
   </table>
   

</ol>
</strong>


{% endblock %}

